!function(n){function l(t){if(e[t])return e[t].exports;var u=e[t]={i:t,l:!1,exports:{}};return n[t].call(u.exports,u,u.exports,l),u.l=!0,u.exports}var e={};l.m=n,l.c=e,l.d=function(n,e,t){l.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:t})},l.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return l.d(e,"a",e),e},l.o=function(n,l){return Object.prototype.hasOwnProperty.call(n,l)},l.p="",l(l.s=0)}([function(n,l,e){"use strict";var t=e(1),u=function(n){return n&&n.__esModule?n:{default:n}}(t),i=[[1,1,1,1,1,1,1,1,1,1,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,0,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,1,1,1,1,1,1,1,1,1,1]],o=new u.default(i),a=o.setLeftAsNextDirection.bind(o),r=o.setRightAsNextDirection.bind(o),s=o.setUpAsNextDirection.bind(o),c=o.setDownAsNextDirection.bind(o);document.getElementById("left").addEventListener("click",a),document.getElementById("right").addEventListener("click",r),document.getElementById("up").addEventListener("click",s),document.getElementById("down").addEventListener("click",c)},function(n,l,e){"use strict";function t(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function n(n,l){for(var e=0;e<l.length;e++){var t=l[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(l,e,t){return e&&n(l.prototype,e),t&&n(l,t),l}}(),i=e(2),o=function(n){return n&&n.__esModule?n:{default:n}}(i),a=function(){function n(l){t(this,n),this.grid=Array(l.length).fill([]),this.nextMove=40,this.speed=1e3,this.score=0,this.directions=["left","up","right","down"],this.nextDirection=this.directions[3],this.offsetMapping={up:{x:-1,y:0},down:{x:1,y:0},left:{x:0,y:-1},right:{x:0,y:1}};var e=0,u=0;for(e=0;e<l.length;e++)for(this.grid[e]=Array(l[e].length).fill(null),u=0;u<l[e].length;u++)null!=l[e][u]&&1===l[e][u]?this.markObstacle(e,u):null!=l[e][u]&&0===l[e][u]?this.markFood(e,u):this.markEmpty(e,u);var i=Math.floor(e/2),o=Math.floor(u/2);this.startGame(i,o)}return u(n,[{key:"arrowKeysHandler",value:function(n){n=n||window.event;var l=n.keyCode;l>=37&&l<=40&&(this.nextDirection=this.directions[l-37])}},{key:"setLeftAsNextDirection",value:function(){this.nextDirection=this.directions[0]}},{key:"setUpAsNextDirection",value:function(){this.nextDirection=this.directions[1]}},{key:"setRightAsNextDirection",value:function(){this.nextDirection=this.directions[2]}},{key:"setDownAsNextDirection",value:function(){this.nextDirection=this.directions[3]}},{key:"startListeningToDirectionInputs",value:function(){document.onkeypress=this.arrowKeysHandler.bind(this),document.onkeyup=this.arrowKeysHandler.bind(this)}},{key:"stopListeningToDirectionInputs",value:function(){document.onkeypress=null,document.onkeyup=null}},{key:"startGame",value:function(n,l){console.log("New Game Started"),this.snake=new o.default(n,l),this.handleHeadMovement(n,l),this.currentSnakeBody=this.snake.getBody(),this.startListeningToDirectionInputs(),setTimeout(this.handleNextTick.bind(this),this.speed)}},{key:"endGame",value:function(){this.stopListeningToDirectionInputs(),clearInterval(this.interval),console.log("End Game")}},{key:"handleNextTick",value:function(){console.log("Evaluating Next Turn");var n=this.snake.getHeadPosition(),l=this.offsetMapping[this.nextDirection],e=n.x+l.x,t=n.y+l.y;if(this.isObstacle(e,t)||this.isBite(e,t))return void this.endGame();var u=this.isFood(e,t),i=this.snake.getTailPosition();if(this.snake.move(e,t,u),this.handleHeadMovement(e,t),u){this.score=this.score+1,this.score%2==0&&(this.speed=.9*this.speed);var o=this.useCSSMagicToChooseNextFoodPositionAtRandom();this.markEmpty(e,t),this.markFood(o.x,o.y),this.handleHeadMovement(e,t)}else this.handleHeadMovement(e,t),this.handleTailMovement(i.x,i.y);this.currentSnakeBody=this.snake.getBody(),setTimeout(this.handleNextTick.bind(this),this.speed)}},{key:"isObstacle",value:function(n,l){return 1==this.grid[n][l]}},{key:"isBite",value:function(n,l){var e,t;if(this.currentSnakeBody.length>1)for(e=0;e<this.currentSnakeBody.length-1;e++)if(t=this.currentSnakeBody[e],n===t.x&&l===t.y)return!0;return!1}},{key:"isFood",value:function(n,l){return 0==this.grid[n][l]}},{key:"handleTailMovement",value:function(n,l){console.log("Trail "+n+" "+l),document.getElementById(n+"-"+l).setAttribute("class","cell")}},{key:"handleHeadMovement",value:function(n,l){console.log("Head Moves to "+n+" "+l),document.getElementById(n+"-"+l).setAttribute("class","occupied")}},{key:"useCSSMagicToChooseNextFoodPositionAtRandom",value:function(){var n=document.getElementsByClassName("cell"),l=n.length,e=Math.floor(Math.random()*l),t=n[e].id.split("-"),u={};return u.x=t[0],u.y=t[1],u}},{key:"setClassForCell",value:function(n,l,e){document.getElementById(n+"-"+l).setAttribute("class",e)}},{key:"markObstacle",value:function(n,l){this.grid[n][l]=1,this.setClassForCell(n,l,"obstacle")}},{key:"markFood",value:function(n,l){this.grid[n][l]=0,this.setClassForCell(n,l,"food")}},{key:"markEmpty",value:function(n,l){this.grid[n][l]=null,this.setClassForCell(n,l,"cell")}}]),n}();l.default=a},function(n,l,e){"use strict";function t(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function n(n,l){for(var e=0;e<l.length;e++){var t=l[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(l,e,t){return e&&n(l.prototype,e),t&&n(l,t),l}}(),i=e(3),o=function(n){return n&&n.__esModule?n:{default:n}}(i),a=function(){function n(l,e){t(this,n);var u={};u.x=l,u.y=e,this.linkList=new o.default(u)}return u(n,[{key:"move",value:function(n,l,e){var t={};t.x=n,t.y=l,this.linkList.addAtHead(t),e||this.linkList.removeAtTail()}},{key:"getBody",value:function(){return this.linkList.getData()}},{key:"getHeadPosition",value:function(){return this.linkList.getHeadData()}},{key:"getTailPosition",value:function(){return this.linkList.getTailData()}}]),n}();l.default=a},function(n,l,e){"use strict";function t(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function n(n,l){for(var e=0;e<l.length;e++){var t=l[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(l,e,t){return e&&n(l.prototype,e),t&&n(l,t),l}}(),i=function(){function n(l){t(this,n);var e=this.makeNodeFromData(l);this.head=e,this.tail=e}return u(n,[{key:"makeNodeFromData",value:function(n){var l={};return l.data=n,l.next=null,l.previous=null,l}},{key:"addAtHead",value:function(n){var l=this.makeNodeFromData(n);l.next=this.head,this.head.previous=l,this.head=l}},{key:"removeAtTail",value:function(){var n=this.tail,l=this.tail.previous;l.next=null,null!==l&&(this.tail=l);var e=n.data;return n=null,e}},{key:"getData",value:function(){for(var n=[],l=this.head;null!=l.next;)n.push(l.data),l=l.next;return n}},{key:"getHeadData",value:function(){return this.head.data}},{key:"getTailData",value:function(){return this.tail.data}}]),n}();l.default=i}]);