!function(l){function n(t){if(e[t])return e[t].exports;var u=e[t]={i:t,l:!1,exports:{}};return l[t].call(u.exports,u,u.exports,n),u.l=!0,u.exports}var e={};n.m=l,n.c=e,n.d=function(l,e,t){n.o(l,e)||Object.defineProperty(l,e,{configurable:!1,enumerable:!0,get:t})},n.n=function(l){var e=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(e,"a",e),e},n.o=function(l,n){return Object.prototype.hasOwnProperty.call(l,n)},n.p="",n(n.s=0)}([function(l,n,e){"use strict";var t=e(1),u=function(l){return l&&l.__esModule?l:{default:l}}(t),i=[[1,1,1,1,1,1,1,1,1,1,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,0,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,1,1,1,1,1,1,1,1,1,1]];new u.default(i)},function(l,n,e){"use strict";function t(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function l(l,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}return function(n,e,t){return e&&l(n.prototype,e),t&&l(n,t),n}}(),i=function(){function l(n,e,u,i,a,o,r,s){t(this,l),this.head=null,this.currentDirection=40,this.validDirections=["up","right","down","left"],this.obstacleHandler=u,this.foodHandler=i,this.endGameHandler=a,this.eatenHandler=o,this.tailMovementHandler=r,this.headMovementHandler=s;var d={};d.x=n,d.y=e,d.next=null,this.head=d,this.direction=this.validDirections[0]}return u(l,[{key:"moveAhead",value:function(l){var n={};if(this.currentDirection&&(l=this.setNextDirection(l)),n.x=this.head.x+this.getXOffset(l),n.y=this.head.y+this.getYOffset(l),n.next=this.head,this.head=n,this.isFood(this.head))this.notifyEaten(this.head),console.log("Yummy!");else{if(this.notifyHeadMovement(this.head),this.isDead(this.head))return void this.notifyDead();for(var e=this.head;null!=e.next.next;)e=e.next;var t=e.next;this.notifyTailMovement(t),t=null,e.next=null}}},{key:"setNextDirection",value:function(l){return 2==Math.abs(this.currentDirection-l==39)?this.currentDirection:l}},{key:"notifyHeadMovement",value:function(l){return this.headMovementHandler(l.x,l.y)}},{key:"notifyTailMovement",value:function(l){return this.tailMovementHandler(l.x,l.y)}},{key:"notifyEaten",value:function(l){return this.eatenHandler(l.x,l.y)}},{key:"isFood",value:function(l){return this.foodHandler(l.x,l.y)}},{key:"getXOffset",value:function(l){return 40==l?1:38==l?-1:0}},{key:"getYOffset",value:function(l){return 37==l?-1:39==l?1:0}},{key:"isDead",value:function(l){return!!this.obstacleHandler(l.x,l.y)&&(console.log("Tried to eat "+l.x+" "+l.y),!0)}},{key:"notifyDead",value:function(){this.endGameHandler()}}]),l}(),a=function(){function l(n){t(this,l),this.grid=Array(n.length).fill([]),this.nextMove=40;var e=0,u=0;for(e=0;e<n.length;e++)for(this.grid[e]=Array(n[e].length).fill(null),u=0;u<n[e].length;u++)null!=n[e][u]&&1===n[e][u]?(this.grid[e][u]=1,this.markObstacle(e,u)):null!=n[e][u]&&0===n[e][u]?(this.grid[e][u]=0,this.markFood(e,u)):this.grid[e][u]=null;this.startListeningToDirectionInputs(),this.snake=new i(Math.floor(e/2),Math.floor(u/2),this.isObstacle.bind(this),this.isFood.bind(this),this.endGame.bind(this),this.eatenHandler.bind(this),this.tailMovementHandler.bind(this),this.headMovementHandler.bind(this)),this.headMovementHandler(Math.floor(e/2),Math.floor(u/2)),this.startGame()}return u(l,[{key:"startListeningToDirectionInputs",value:function(){document.onkeypress=this.arrowKeysHandler.bind(this),document.onkeyup=this.arrowKeysHandler.bind(this)}},{key:"startGame",value:function(){console.log("New Game Started"),this.interval=setInterval(this.handleNextTick.bind(this),1e3)}},{key:"handleNextTick",value:function(){console.log("Next Turn"),this.snake.moveAhead(this.nextMove)}},{key:"isObstacle",value:function(l,n){var e=l,t=n;return 1==this.grid[e][t]&&(this.markFatal(l,n),!0)}},{key:"isFood",value:function(l,n){var e=l,t=n;return 0==this.grid[e][t]}},{key:"endGame",value:function(){clearInterval(this.interval)}},{key:"tailMovementHandler",value:function(l,n){console.log("Trail "+l+" "+n),document.getElementById(l+"-"+n).setAttribute("class","cell")}},{key:"headMovementHandler",value:function(l,n){console.log("Head Moves to "+l+" "+n),document.getElementById(l+"-"+n).setAttribute("class","occupied")}},{key:"eatenHandler",value:function(l,n){this.grid[l][n]=null,console.log("Ate "+l+" "+n),document.getElementById(l+"-"+n).setAttribute("class","occupied");var e=document.getElementsByClassName("cell"),t=e.length,u=Math.floor(Math.random()*t),i=e[u].id.split("-");this.markFood(i[0],i[1])}},{key:"markObstacle",value:function(l,n){document.getElementById(l+"-"+n).setAttribute("class","obstacle")}},{key:"markFood",value:function(l,n){this.grid[l][n]=0,document.getElementById(l+"-"+n).setAttribute("class","food")}},{key:"markFatal",value:function(l,n){document.getElementById(l+"-"+n).setAttribute("class","fatal")}},{key:"arrowKeysHandler",value:function(l){l=l||window.event;var n=l.keyCode;n>=37&&n<=40&&(this.nextMove=n)}}]),l}();n.default=a}]);