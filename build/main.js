!function(n){function e(l){if(t[l])return t[l].exports;var i=t[l]={i:l,l:!1,exports:{}};return n[l].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t={};e.m=n,e.c=t,e.d=function(n,t,l){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:l})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([function(n,e,t){"use strict";var l=t(1),i=function(n){return n&&n.__esModule?n:{default:n}}(l),u=[[1,1,1,1,1,1,1,1,1,1,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,0,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,null,null,null,null,null,null,null,null,null,1],[1,1,1,1,1,1,1,1,1,1,1]],r=new i.default(u),o=r.setLeftAsNextDirection.bind(r),s=r.setRightAsNextDirection.bind(r),a=r.setUpAsNextDirection.bind(r),c=r.setDownAsNextDirection.bind(r);document.getElementById("left").addEventListener("click",o),document.getElementById("right").addEventListener("click",s),document.getElementById("up").addEventListener("click",a),document.getElementById("down").addEventListener("click",c)},function(n,e,t){"use strict";function l(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}return function(e,t,l){return t&&n(e.prototype,t),l&&n(e,l),e}}(),u=t(2),r=function(n){return n&&n.__esModule?n:{default:n}}(u),o=function(){function n(e){l(this,n),this.grid=Array(e.length).fill([]),this.nextMove=40,this.speed=1e3,this.score=0,this.directions=["left","up","right","down"],this.nextDirection=this.directions[3],this.currentDirection=this.nextDirection,this.offsetMapping={up:{x:-1,y:0},down:{x:1,y:0},left:{x:0,y:-1},right:{x:0,y:1}};var t=0,i=0;for(t=0;t<e.length;t++)for(this.grid[t]=Array(e[t].length).fill(null),i=0;i<e[t].length;i++)null!=e[t][i]&&1===e[t][i]?this.markObstacle(t,i):null!=e[t][i]&&0===e[t][i]?this.markFood(t,i):this.markEmpty(t,i);var u=Math.floor(t/2),r=Math.floor(i/2);this.startGame(u,r)}return i(n,[{key:"arrowKeysHandler",value:function(n){n=n||window.event;var e=n.keyCode;e>=37&&e<=40&&(this.nextDirection=this.directions[e-37])}},{key:"setLeftAsNextDirection",value:function(){this.nextDirection=this.directions[0]}},{key:"setUpAsNextDirection",value:function(){this.nextDirection=this.directions[1]}},{key:"setRightAsNextDirection",value:function(){this.nextDirection=this.directions[2]}},{key:"setDownAsNextDirection",value:function(){this.nextDirection=this.directions[3]}},{key:"startListeningToDirectionInputs",value:function(){document.onkeypress=this.arrowKeysHandler.bind(this),document.onkeyup=this.arrowKeysHandler.bind(this)}},{key:"stopListeningToDirectionInputs",value:function(){document.onkeypress=null,document.onkeyup=null}},{key:"startGame",value:function(n,e){console.log("New Game Started"),this.snake=new r.default(n,e),this.handleHeadMovement(n,e),this.currentSnakeBody=this.snake.getBody(),this.startListeningToDirectionInputs(),setTimeout(this.handleNextTick.bind(this),this.speed)}},{key:"endGame",value:function(){this.stopListeningToDirectionInputs(),clearInterval(this.interval),console.log("End Game")}},{key:"handleNextTick",value:function(){console.log("Evaluating Next Turn");var n=this.snake.getHeadPosition(),e={};this.isTurnAllowed()?e=this.offsetMapping[this.nextDirection]:(e=this.offsetMapping[this.currentDirection],this.nextDirection=this.currentDirection);var t=n.x+e.x,l=n.y+e.y;if(this.isObstacle(t,l)||this.isBite(t,l))return void this.endGame();var i=this.isFood(t,l),u=this.snake.getTailPosition();if(this.snake.move(t,l,i),this.handleHeadMovement(t,l),i){this.score=this.score+1,this.score%2==0&&(this.speed=.9*this.speed);var r=this.useCSSMagicToChooseNextFoodPositionAtRandom();this.markEmpty(t,l),this.markFood(r.x,r.y),this.handleHeadMovement(t,l)}else this.handleHeadMovement(t,l),this.handleTailMovement(u.x,u.y);this.currentSnakeBody=this.snake.getBody(),this.currentDirection=this.nextDirection,setTimeout(this.handleNextTick.bind(this),this.speed)}},{key:"isTurnAllowed",value:function(){switch(this.currentDirection){case"up":if("down"==this.nextDirection)return!1;break;case"down":if("up"==this.nextDirection)return!1;break;case"left":if("right"==this.nextDirection)return!1;break;case"right":if("left"==this.nextDirection)return!1}return!0}},{key:"isObstacle",value:function(n,e){return 1==this.grid[n][e]}},{key:"isBite",value:function(n,e){var t,l;if(this.currentSnakeBody.length>1)for(t=0;t<this.currentSnakeBody.length-1;t++)if(l=this.currentSnakeBody[t],n===l.x&&e===l.y)return!0;return!1}},{key:"isFood",value:function(n,e){return 0==this.grid[n][e]}},{key:"handleTailMovement",value:function(n,e){console.log("Trail "+n+" "+e),document.getElementById(n+"-"+e).setAttribute("class","cell")}},{key:"handleHeadMovement",value:function(n,e){console.log("Head Moves to "+n+" "+e),document.getElementById(n+"-"+e).setAttribute("class","occupied")}},{key:"useCSSMagicToChooseNextFoodPositionAtRandom",value:function(){var n=document.getElementsByClassName("cell"),e=n.length,t=Math.floor(Math.random()*e),l=n[t].id.split("-"),i={};return i.x=l[0],i.y=l[1],i}},{key:"setClassForCell",value:function(n,e,t){document.getElementById(n+"-"+e).setAttribute("class",t)}},{key:"markObstacle",value:function(n,e){this.grid[n][e]=1,this.setClassForCell(n,e,"obstacle")}},{key:"markFood",value:function(n,e){this.grid[n][e]=0,this.setClassForCell(n,e,"food")}},{key:"markEmpty",value:function(n,e){this.grid[n][e]=null,this.setClassForCell(n,e,"cell")}}]),n}();e.default=o},function(n,e,t){"use strict";function l(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}return function(e,t,l){return t&&n(e.prototype,t),l&&n(e,l),e}}(),u=t(3),r=function(n){return n&&n.__esModule?n:{default:n}}(u),o=function(){function n(e,t){l(this,n);var i={};i.x=e,i.y=t,this.linkList=new r.default(i)}return i(n,[{key:"move",value:function(n,e,t){var l={};l.x=n,l.y=e,this.linkList.addAtHead(l),t||this.linkList.removeAtTail()}},{key:"getBody",value:function(){return this.linkList.getData()}},{key:"getHeadPosition",value:function(){return this.linkList.getHeadData()}},{key:"getTailPosition",value:function(){return this.linkList.getTailData()}}]),n}();e.default=o},function(n,e,t){"use strict";function l(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}return function(e,t,l){return t&&n(e.prototype,t),l&&n(e,l),e}}(),u=function(){function n(e){l(this,n);var t=this.makeNodeFromData(e);this.head=t,this.tail=t}return i(n,[{key:"makeNodeFromData",value:function(n){var e={};return e.data=n,e.next=null,e.previous=null,e}},{key:"addAtHead",value:function(n){var e=this.makeNodeFromData(n);e.next=this.head,this.head.previous=e,this.head=e}},{key:"removeAtTail",value:function(){var n=this.tail,e=this.tail.previous;e.next=null,null!==e&&(this.tail=e);var t=n.data;return n=null,t}},{key:"getData",value:function(){for(var n=[],e=this.head;null!=e.next;)n.push(e.data),e=e.next;return n}},{key:"getHeadData",value:function(){return this.head.data}},{key:"getTailData",value:function(){return this.tail.data}}]),n}();e.default=u}]);